var LinksEditor=function(e){self=this,self.input=e,self.links=e.val().length>0?JSON.parse(e.val()):[],self.init()};LinksEditor.prototype.factory={},LinksEditor.prototype.generateItem=function(e){var e=self.factory.linkItem(e);return self.factory.linkItemDOM(e)},LinksEditor.prototype.init=function(){var e=$('<div class="links-editor-items"></div>'),i=$('<div class="form-group"><div class="btn btn-sm blue form-control">+</div></div>');i.on("click",function(){e.append(self.generateItem())});for(var t in self.links)e.append(self.generateItem(self.links[t]));i.insertAfter(self.input),e.insertAfter(self.input),e.sortable({axis:"y",handle:".drag",stop:self.handleLinksChange}),self.container=e},LinksEditor.prototype.handleLinksChange=function(){$(this).hasClass("remove")&&$(this).closest(".links-editor-item").remove();var e=$(self.container).find(".links-editor-item"),i=[];e.length>0&&e.map(function(e,t){var n={id:$(t).data("id"),title:$(t).find("input").eq(0).val(),url:$(t).find("input").eq(1).val(),order:e,enabled:$(t).find('input[type="checkbox"]:checked').length>0};n.title&&n.url&&i.push(n)}),self.input.val(JSON.stringify(i))},LinksEditor.prototype.factory.linkItem=function(e){return e?e:{id:"",title:"",url:"",order:"",enabled:1}},LinksEditor.prototype.factory.linkItemDOM=function(e){var i=$('<div class="ui-state-default links-editor-item" data-id="'+e.id+'">		<input class="form-control input-sm" placeholder="Title" type="text" value="'+e.title+'">		<div class="input-icon input-icon-sm"><i class="fa fa-link"></i><input class="form-control input-sm" placeholder="URL" type="text" value="'+e.url+'"></div>		<div class="btn btn-xs blue drag"><i class="fa fa-bars"></i></div>		<div class="btn btn-xs btn-danger remove"><i class="fa fa-trash"></i></div>		<label class="checkbox-inline"><input type="checkbox" value="1"> ENABLED </label>	</div>');return 1==e.enabled&&i.find('input[type="checkbox"]').prop("checked","checked"),i.find("input").on("keyup click",self.handleLinksChange),i.find(".remove").on("click",self.handleLinksChange),i},$.fn.loadLinksEditor=function(){new LinksEditor(this)},$(document).ready(function(){var e=".links-editor";$(e).length>0&&$(e).map(function(){$(this).loadLinksEditor()})});